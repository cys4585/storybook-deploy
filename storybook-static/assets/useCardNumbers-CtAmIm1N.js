import{j as n}from"./jsx-runtime-BnIj46N_.js";import{T as b,C as L,L as j,E as y}from"./ErrorMessage-CSnPlGZt.js";import{I as d}from"./Input-Dqji-sXd.js";import{u as f}from"./styled-components.browser.esm-BDDUX98t.js";import{r as o}from"./index-CsdIBAqE.js";import{i as C}from"./isNumericString-BqsgwGh2.js";import{u as M}from"./useBoolean-C4Nz0XNG.js";function H({valueState:e,errorState:s,inputRefs:u,onChange:i,onBlur:m}){return o.useEffect(()=>{var c;(c=u[0].current)==null||c.focus()},[]),n.jsxs(w,{children:[n.jsxs("div",{children:[n.jsx(b,{children:"결제할 카드 번호를 입력해 주세요"}),n.jsx(L,{children:"본인 명의의 카드만 결제 가능합니다."})]}),n.jsxs(O,{children:[n.jsx(j,{children:"카드 번호"}),n.jsxs(N,{children:[n.jsx(d,{ref:u[0],maxLength:4,placeholder:"1234",value:e[0],isError:s.isError[0],onChange:i(0),onBlur:m(0)}),n.jsx(d,{ref:u[1],maxLength:4,placeholder:"1234",value:e[1],isError:s.isError[1],onChange:i(1),onBlur:m(1)}),n.jsx(d,{ref:u[2],maxLength:4,placeholder:"1234",type:"password",value:e[2],isError:s.isError[2],onChange:i(2),onBlur:m(2)}),n.jsx(d,{ref:u[3],maxLength:4,placeholder:"1234",type:"password",value:e[3],isError:s.isError[3],onChange:i(3),onBlur:m(3)})]}),s.isError.some(c=>c)&&n.jsx(y,{message:s.errorMessage})]})]})}const w=f.div`
  display: flex;
  flex-direction: column;
  gap: 16px;
`,O=f.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,N=f.div`
  display: flex;
  gap: 10px;
`;H.__docgenInfo={description:"",methods:[],displayName:"CardNumbersInput",props:{valueState:{required:!0,tsType:{name:"tuple",raw:"[string, string, string, string]",elements:[{name:"string"},{name:"string"},{name:"string"},{name:"string"}]},description:""},errorState:{required:!0,tsType:{name:"CardNumbersErrorState"},description:""},inputRefs:{required:!0,tsType:{name:"tuple",raw:`[\r
  React.RefObject<HTMLInputElement>,\r
  React.RefObject<HTMLInputElement>,\r
  React.RefObject<HTMLInputElement>,\r
  React.RefObject<HTMLInputElement>,\r
]`,elements:[{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:`(\r
  targetIndex: number\r
) => (event: React.ChangeEvent<HTMLInputElement>) => void`,signature:{arguments:[{type:{name:"number"},name:"targetIndex"}],return:{name:"signature",type:"function",raw:"(event: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}}}},description:""},onBlur:{required:!0,tsType:{name:"signature",type:"function",raw:`(\r
  targetCardNumberIndex: number\r
) => (event: React.FocusEvent<HTMLInputElement>) => void`,signature:{arguments:[{type:{name:"number"},name:"targetCardNumberIndex"}],return:{name:"signature",type:"function",raw:"(event: React.FocusEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}}}},description:""}}};const B=e=>{if(!C(e))throw new Error("카드 번호는 숫자만 입력할 수 있어요")},F=e=>{if(e.length!==4)throw new Error("네 자리 수를 입력해주세요")},q=e=>e.every(s=>s.length===4),S=e=>e.length===4,V=e=>e===3,J=()=>{const[e,s]=o.useState(["","","",""]),[u,i]=o.useState({isError:[!1,!1,!1,!1],errorMessage:""}),{flag:m,setTrue:c}=M(),E=[o.useRef(null),o.useRef(null),o.useRef(null),o.useRef(null)],g=o.useMemo(()=>e.every(t=>t.length>0)&&u.isError.every(t=>!t),[e,u.isError]),v=(t,a)=>{s(r=>{const p=[...r];return p[a]=t,p})},l=(t,a,r)=>{i(p=>({isError:p.isError.map((T,I)=>I===a?t:T),errorMessage:r}))},R=(t,a)=>{var r;!S(t)||V(a)||(r=E[a+1].current)==null||r.focus()},h=t=>a=>{try{const{value:r}=a.target;B(r),v(r,t),l(!1,t,""),R(r,t)}catch(r){r instanceof Error&&l(!0,t,r.message)}},x=t=>a=>{try{F(a.target.value),l(!1,t,"")}catch(r){r instanceof Error&&l(!0,t,r.message)}};return o.useEffect(()=>{m||q(e)&&c()},[e]),{isDoneThisStep:m,isValid:g,cardNumbersInputProps:{valueState:e,errorState:u,inputRefs:E,onChange:h,onBlur:x}}};export{H as C,J as u};
